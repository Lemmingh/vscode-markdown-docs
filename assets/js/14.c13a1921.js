(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{190:function(e,n,t){"use strict";t.r(n);var o=t(6),i=Object(o.a)({},(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"overview"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#overview"}},[e._v("#")]),e._v(" Overview")]),e._v(" "),t("p",[e._v("We build two kinds of VSIX packages on CI:")]),e._v(" "),t("ul",[t("li",[e._v("Production: Optimized by webpack. Only contains indispensable files. Ready for deployment.")]),e._v(" "),t("li",[e._v("Debug: No optimization. Built by webpack in "),t("code",[e._v("development")]),e._v(" mode. Intended for debugging and profiling.")])]),e._v(" "),t("p",[e._v("In practice, they only differ in optimization level, and we just change the "),t("code",[e._v("vscode:prepublish")]),e._v(" command when building:")]),e._v(" "),t("ul",[t("li",[e._v("Production: "),t("code",[e._v("webpack --mode production")])]),e._v(" "),t("li",[e._v("Debug: "),t("code",[e._v("webpack --mode development")])])]),e._v(" "),t("h2",{attrs:{id:"determining-modules-needed-by-the-packages"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#determining-modules-needed-by-the-packages"}},[e._v("#")]),e._v(" Determining modules needed by the packages")]),e._v(" "),t("p",[e._v("The packages share the same "),t("code",[e._v("vscodeignore")]),e._v(".")]),e._v(" "),t("p",[e._v("First find what to check in step 1 and 2. Then determine what are required in step 3 and 4. Be careful about dependence tree.")]),e._v(" "),t("ol",[t("li",[e._v("Find dependencies that vsce packs by default:\n"),t("ul",[t("li",[e._v("Run "),t("code",[e._v("npm ls --production --parseable")]),e._v(" to get the list.")]),e._v(" "),t("li",[e._v("Run "),t("code",[e._v("npm ls --production")]),e._v(" to know their relationships.")])])]),e._v(" "),t("li",[e._v("Find modules that webpack can bundle:\n"),t("ol",[t("li",[e._v("Check its configuration "),t("code",[e._v("webpack.config.js")]),e._v(".")]),e._v(" "),t("li",[e._v("Analyze the bundle according to webpack's instructions.")]),e._v(" "),t("li",[e._v("Run "),t("code",[e._v("npx webpack --mode development")]),e._v(".")])])]),e._v(" "),t("li",[e._v("Determine those needed by VS Code:\n"),t("ul",[t("li",[e._v("In "),t("code",[e._v("package.json")]),e._v(", files under "),t("code",[e._v("contributes.markdown.*")]),e._v(" are always needed.")])])]),e._v(" "),t("li",[e._v("Examine others manually:\n"),t("ul",[t("li",[e._v("Read the bundle analysis reports generated during step 2 carefully.")]),e._v(" "),t("li",[e._v("When in doubt, search in the JavaScript file.")]),e._v(" "),t("li",[e._v("Remember to check modules contributed by "),t("code",[e._v("extendMarkdownIt()")]),e._v(".")]),e._v(" "),t("li",[e._v("Remember to check resource files that our code dynamically loads.")])])])]),e._v(" "),t("p",[e._v("After creating a new "),t("code",[e._v("vscodeignore")]),e._v(" file, run "),t("code",[e._v("vsce ls")]),e._v(" to verify your design.")]),e._v(" "),t("h2",{attrs:{id:"references"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#references"}},[e._v("#")]),e._v(" References")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://code.visualstudio.com/api/working-with-extensions/bundling-extension",target:"_blank",rel:"noopener noreferrer"}},[e._v("Bundling Extensions | Visual Studio Code Extension API"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://webpack.js.org/guides/code-splitting/#bundle-analysis",target:"_blank",rel:"noopener noreferrer"}},[e._v("Bundle Analysis | Code Splitting | webpack"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://webpack.js.org/api/cli/#analyzing-bundle",target:"_blank",rel:"noopener noreferrer"}},[e._v("Analyzing Bundle | Command Line Interface | webpack"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://webpack.js.org/concepts/dependency-graph/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Dependency Graph | webpack"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://webpack.js.org/configuration/mode/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Mode | webpack"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://code.visualstudio.com/api/extension-guides/markdown-extension",target:"_blank",rel:"noopener noreferrer"}},[e._v("Markdown Extension | Visual Studio Code Extension API"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);n.default=i.exports}}]);