<!DOCTYPE html>
<html lang="en-US">
  <head>
    <title>Packaging | Markdown All in One Documentation</title><meta name="description" content=""><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="VuePress 2.0.0-beta.1">
    <link rel="preload" href="/docs/assets/js/runtime~app.dab4fb38.js" as="script"><link rel="preload" href="/docs/assets/css/styles.186eeeec.css" as="style"><link rel="preload" href="/docs/assets/js/6753.dbb71983.js" as="script"><link rel="preload" href="/docs/assets/js/app.12cdd6d5.js" as="script">
    <link rel="stylesheet" href="/docs/assets/css/styles.186eeeec.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><header class="navbar"><div class="toggle-sidebar-button"><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class=""></path></svg></div><span><a href="/docs/" class=""><!----><span class="site-name">Markdown All in One Documentation</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/docs/guide/" class="nav-link" exact="false" aria-label="Guide"><!--[--><!--]--> Guide <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/docs/decisions/" class="nav-link" exact="false" aria-label="Decisions"><!--[--><!--]--> Decisions <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/docs/contributing/" class="nav-link" exact="false" aria-label="Contributing"><!--[--><!--]--> Contributing <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/docs/specs/" class="nav-link" exact="false" aria-label="Specifications"><!--[--><!--]--> Specifications <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/docs/project-management/" class="nav-link" exact="false" aria-label="Management"><!--[--><!--]--> Management <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/docs/blog/" class="nav-link" exact="false" aria-label="Blog"><!--[--><!--]--> Blog <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://marketplace.visualstudio.com/items?itemName=yzhang.markdown-all-in-one" rel="noopener noreferrer" target="_blank" aria-label="Install"><!--[--><!--]--> Install <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/yzhang-gh/vscode-markdown" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><!----></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/docs/guide/" class="nav-link" exact="false" aria-label="Guide"><!--[--><!--]--> Guide <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/docs/decisions/" class="nav-link" exact="false" aria-label="Decisions"><!--[--><!--]--> Decisions <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/docs/contributing/" class="nav-link" exact="false" aria-label="Contributing"><!--[--><!--]--> Contributing <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/docs/specs/" class="nav-link" exact="false" aria-label="Specifications"><!--[--><!--]--> Specifications <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/docs/project-management/" class="nav-link" exact="false" aria-label="Management"><!--[--><!--]--> Management <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/docs/blog/" class="nav-link" exact="false" aria-label="Blog"><!--[--><!--]--> Blog <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://marketplace.visualstudio.com/items?itemName=yzhang.markdown-all-in-one" rel="noopener noreferrer" target="_blank" aria-label="Install"><!--[--><!--]--> Install <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/yzhang-gh/vscode-markdown" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><section class="sidebar-group"><p class="sidebar-heading">Reporting issues</p><ul class=""><li><!--[--><a href="/docs/contributing/issue.html" class="nav-link sidebar-link" exact="false" aria-label="Creating an issue"><!--[--><!--]--> Creating an issue <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/docs/contributing/performance-issue.html" class="nav-link sidebar-link" exact="false" aria-label="Reporting a performance issue"><!--[--><!--]--> Reporting a performance issue <!--[--><!--]--></a><!----><!--]--></li></ul></section><!--]--><!--[--><section class="sidebar-group"><p class="sidebar-heading">Development</p><ul class=""><li><!--[--><a href="/docs/contributing/" class="nav-link sidebar-link" exact="false" aria-label="Contributing guide"><!--[--><!--]--> Contributing guide <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/docs/contributing/code-style.html" class="nav-link sidebar-link" exact="false" aria-label="Code style"><!--[--><!--]--> Code style <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/docs/contributing/emoji.html" class="nav-link sidebar-link" exact="false" aria-label="Emoji"><!--[--><!--]--> Emoji <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/docs/contributing/optimization.html" class="nav-link sidebar-link" exact="false" aria-label="Optimization tricks"><!--[--><!--]--> Optimization tricks <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/docs/contributing/packaging.html" class="router-link-active router-link-exact-active nav-link sidebar-link active" exact="false" aria-label="Packaging"><!--[--><!--]--> Packaging <!--[--><!--]--></a><ul class="sidebar-sub-headers"><li><!--[--><a aria-current="page" href="/docs/contributing/packaging.html#overview" class="router-link-active router-link-exact-active nav-link sidebar-link" exact="false" aria-label="Overview"><!--[--><!--]--> Overview <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/docs/contributing/packaging.html#determining-modules-needed-by-the-packages" class="router-link-active router-link-exact-active nav-link sidebar-link" exact="false" aria-label="Determining modules needed by the packages"><!--[--><!--]--> Determining modules needed by the packages <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/docs/contributing/packaging.html#references" class="router-link-active router-link-exact-active nav-link sidebar-link" exact="false" aria-label="References"><!--[--><!--]--> References <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a href="/docs/contributing/test.html" class="nav-link sidebar-link" exact="false" aria-label="Test"><!--[--><!--]--> Test <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/docs/contributing/textmate-language-grammar.html" class="nav-link sidebar-link" exact="false" aria-label="TextMate grammar guide"><!--[--><!--]--> TextMate grammar guide <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/docs/contributing/localization.html" class="nav-link sidebar-link" exact="false" aria-label="Localization"><!--[--><!--]--> Localization <!--[--><!--]--></a><!----><!--]--></li></ul></section><!--]--><!--[--><section class="sidebar-group"><p class="sidebar-heading">Documentation</p><ul class=""><li><!--[--><a href="/docs/contributing/word-choice.html" class="nav-link sidebar-link" exact="false" aria-label="Word choice"><!--[--><!--]--> Word choice <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/docs/contributing/writing-style-guide.html" class="nav-link sidebar-link" exact="false" aria-label="Writing style guide"><!--[--><!--]--> Writing style guide <!--[--><!--]--></a><!----><!--]--></li></ul></section><!--]--><!--]--></ul><!--[--><!--]--></aside><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="packaging"><a class="header-anchor" href="#packaging">#</a> Packaging</h1><h2 id="overview"><a class="header-anchor" href="#overview">#</a> Overview</h2><p>Our product is bundled by webpack, then packaged by vsce.</p><p>We build two kinds of VSIX packages on CI:</p><ul><li>Production: Optimized by webpack. Only contains indispensable files. Ready for deployment.</li><li>Debug: No optimization. Built by webpack in <code>development</code> mode. Intended for debugging and profiling.</li></ul><p>In practice, they only differ in optimization level. We just change the <code>NODE_ENV</code> environment variable, then our build script will set the actual build command accordingly:</p><ul><li>Production: <code>webpack --mode production</code></li><li>Debug: <code>webpack --mode development</code></li></ul><h2 id="determining-modules-needed-by-the-packages"><a class="header-anchor" href="#determining-modules-needed-by-the-packages">#</a> Determining modules needed by the packages</h2><p>The packages share the same <code>vscodeignore</code>.</p><p>First find what to check in step 1 and 2. Then determine what are required in step 3 and 4. Be careful about dependence tree.</p><ol><li>Find dependencies that vsce packs by default: <ul><li>Run <code>npm ls --production --parseable</code> to get the list.</li><li>Run <code>npm ls --production</code> to know their relationships.</li></ul></li><li>Find modules that webpack can bundle: <ol><li>Check its configuration <code>webpack.config.js</code>.</li><li>Analyze the bundle according to webpack&#39;s instructions.</li><li>Run <code>npx webpack --mode development</code>.</li></ol></li><li>Determine those needed by VS Code: <ul><li>In <code>package.json</code>, files under <code>contributes.markdown.*</code> are always needed.</li></ul></li><li>Examine others manually: <ul><li>Read the bundle analysis reports generated during step 2 carefully.</li><li>When in doubt, search in the bundle (JavaScript file).</li><li>Remember to check modules contributed by <code>extendMarkdownIt()</code>.</li><li>Remember to check resource files that our code dynamically loads.</li></ul></li></ol><p>After creating a new <code>vscodeignore</code> file, run <code>vsce ls</code> to verify your design.</p><h2 id="references"><a class="header-anchor" href="#references">#</a> References</h2><ul><li><a href="https://code.visualstudio.com/api/working-with-extensions/bundling-extension" target="_blank" rel="noopener noreferrer">Bundling Extensions | Visual Studio Code Extension API<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></li><li><a href="https://webpack.js.org/guides/code-splitting/#bundle-analysis" target="_blank" rel="noopener noreferrer">Bundle Analysis | Code Splitting | webpack<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></li><li><a href="https://webpack.js.org/api/cli/#analyzing-bundle" target="_blank" rel="noopener noreferrer">Analyzing Bundle | Command Line Interface | webpack<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></li><li><a href="https://webpack.js.org/concepts/dependency-graph/" target="_blank" rel="noopener noreferrer">Dependency Graph | webpack<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></li><li><a href="https://webpack.js.org/configuration/mode/" target="_blank" rel="noopener noreferrer">Mode | webpack<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></li><li><a href="https://code.visualstudio.com/api/extension-guides/markdown-extension" target="_blank" rel="noopener noreferrer">Markdown Extension | Visual Studio Code Extension API<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></li></ul><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/markdown-all-in-one/docs/edit/draft/docs/contributing/packaging.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"> ← <a href="/docs/contributing/optimization.html" class="nav-link" exact="false" aria-label="Optimization tricks"><!--[--><!--]--> Optimization tricks <!--[--><!--]--></a></span><span class="next"><a href="/docs/contributing/test.html" class="nav-link" exact="false" aria-label="Test"><!--[--><!--]--> Test <!--[--><!--]--></a> → </span></p></nav><!--[--><!--]--></main></div><!----><!--]--></div>
    <script src="/docs/assets/js/runtime~app.dab4fb38.js" defer></script><script src="/docs/assets/js/6753.dbb71983.js" defer></script><script src="/docs/assets/js/app.12cdd6d5.js" defer></script>
  </body>
</html>
